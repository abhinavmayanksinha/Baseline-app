<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <title>Baseline</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brandPurple: '#6A1CF7',
            brandPink: '#E11D48'
          }
        }
      }
    }
  </script>
</head>

<body class="min-h-screen bg-brandPurple overflow-x-hidden">


  <!-- ================= LOGIN VIEW ================= -->
  <div id="loginView" class="min-h-screen flex items-center justify-center px-4">
    <div class="w-full max-w-sm bg-white rounded-3xl shadow-lg p-6 space-y-6">

      <!-- Logo -->
      <div class="text-center space-y-3">
  <img
    src="assets/baseline BG.png"
    alt="Baseline logo"
    class="mx-auto h-20"
  />
  <p class="text-[11px] text-gray-400">by Team Echo</p>
  <p class="text-sm text-gray-600">
    A 30-second daily check-in for self-awareness.
  </p>
</div>


      <!-- Login Button -->
      <button
        onclick="login()"
        class="w-full bg-brandPink text-white py-3 rounded-2xl font-medium hover:opacity-90 transition">
        Continue
      </button>

      <p class="text-xs text-gray-400">
        Baseline supports self-awareness. It is not a diagnostic or therapeutic tool.
      </p>
    </div>
  </div>

  <!-- ================= APP VIEW ================= -->
  <div id="appView" class="hidden min-h-screen bg-gray-100">

    <!-- NAVBAR -->
    <nav class="bg-white shadow-sm px-4 py-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
  
  <img src="assets/baseline BG.png" class="h-10 mx-auto sm:mx-0" />

  <div class="flex flex-wrap justify-center sm:justify-end gap-3 text-sm text-gray-600">
    <button onclick="showView('checkin')">Check-in</button>
    <button onclick="showView('moodData')">Mood Data</button>
    <button onclick="showView('improveMood')">Improve Mood</button>
    <button onclick="showView('miniResets')">Mini Resets</button>
    <button onclick="logout()" class="text-red-500">Logout</button>
  </div>

</nav>



    <!-- MAIN CONTENT -->
    <main class="flex justify-center px-4 py-6 sm:py-10">

  <!-- ================= CHECK-IN VIEW ================= -->
  <section id="checkinView" class="w-full max-w-md min-h-[80vh]">

    <div class="bg-white rounded-3xl shadow p-6 space-y-6">

      <h2 class="text-lg font-semibold text-gray-800 text-center">
        Today‚Äôs Check-in
      </h2>

      <!-- Mood -->
      <div>
        <p class="font-medium text-gray-700 mb-2">
          How are you feeling today?
        </p>
        <div class="flex flex-wrap justify-center gap-2 sm:justify-between">

          <button class="mood-btn text-2xl p-3 rounded-full hover:bg-gray-100">üòä</button>
          <button class="mood-btn text-2xl p-3 rounded-full hover:bg-gray-100">üôÇ</button>
          <button class="mood-btn text-2xl p-3 rounded-full hover:bg-gray-100">üòê</button>
          <button class="mood-btn text-2xl p-3 rounded-full hover:bg-gray-100">üòî</button>
          <button class="mood-btn text-2xl p-3 rounded-full hover:bg-gray-100">üòû</button>
        </div>
      </div>

      <!-- Energy -->
      <div>
        <p class="font-medium text-gray-700 mb-2">Energy level</p>
        <div class="flex gap-2">
          <button class="energy-btn flex-1 border rounded-xl py-2 hover:bg-gray-100">Low</button>
          <button class="energy-btn flex-1 border rounded-xl py-2 hover:bg-gray-100">Medium</button>
          <button class="energy-btn flex-1 border rounded-xl py-2 hover:bg-gray-100">High</button>
        </div>
      </div>

      <!-- Stress -->
      <div>
        <p class="font-medium text-gray-700 mb-2">Stress level</p>
        <div class="flex gap-2">
          <button class="stress-btn flex-1 border rounded-xl py-2 hover:bg-gray-100">Low</button>
          <button class="stress-btn flex-1 border rounded-xl py-2 hover:bg-gray-100">Medium</button>
          <button class="stress-btn flex-1 border rounded-xl py-2 hover:bg-gray-100">High</button>
        </div>
      </div>

      <!-- Submit -->
      <button
        id="submitBtn"
        class="w-full bg-brandPink text-white py-3 rounded-2xl font-medium hover:opacity-90 transition">
        Submit Check-in
      </button>

      <!-- Success message -->
      <div
        id="successMessage"
        class="hidden bg-green-50 border border-green-200 text-green-700 rounded-2xl p-4 text-sm text-center">
        ‚úÖ Check-in saved. Thanks for checking in with yourself.
      </div>

      <!-- Insight -->
      <div class="bg-gray-50 rounded-2xl p-4">
        <p class="text-xs text-gray-500 mb-1">Today‚Äôs insight</p>
        <p id="todayInsight" class="text-gray-700 text-sm">
          You‚Äôve had slightly lower energy recently.
          A short break or light movement could help reset your baseline.
        </p>
      </div>

    </div>
  </section>

  <!-- ================= MOOD DATA VIEW ================= -->
  <section id="moodDataView" class="hidden w-full max-w-2xl">
  <div class="bg-white rounded-3xl shadow p-6 space-y-4">
    <h2 class="text-lg font-semibold text-center">Your Week at a Glance</h2>
    <canvas id="moodChart" width="400" height="200"></canvas>
    <div id="moodDataContent" class="text-sm text-gray-600"></div>
  </div>
</section>

  <!-- ================= IMPROVE MOOD VIEW ================= -->
  <section id="improveMoodView" class="hidden w-full max-w-md" class="w-full max-w-md min-h-[80vh]">
    <div class="bg-white rounded-3xl shadow p-6 space-y-3">
      <h2 class="text-lg font-semibold">Improve Mood</h2>
      <ul class="list-disc list-inside text-sm text-gray-600 space-y-1">
        <li>Step outside for a few minutes</li>
        <li>Drink some water</li>
        <li>Slow breathing for 30 seconds</li>
      </ul>
    </div>
  </section>

  <!-- ================= MINI RESETS VIEW ================= -->
  <section id="miniResetsView" class="hidden w-full max-w-md" class="w-full max-w-md min-h-[80vh]">
    <div class="bg-white rounded-3xl shadow p-6 text-center space-y-3">
      <h2 class="text-lg font-semibold">Mini Resets</h2>
      <p class="text-sm text-gray-600">
        Small actions to reset focus.
      </p>
      <button class="bg-brandPink text-white px-4 py-2 rounded-xl">
        Take a 30-second pause
      </button>
    </div>
  </section>

</main>

  </div>

  <!-- ================= BASIC JS ================= -->
  <script>
    function login() {
      document.getElementById('loginView').classList.add('hidden');
      document.getElementById('appView').classList.remove('hidden');
    }

    function logout() {
      document.getElementById('appView').classList.add('hidden');
      document.getElementById('loginView').classList.remove('hidden');
    }

  </script>

<script>
  // Store selected values
  let checkInHistory = [];
  let selectedMood = null;
  let selectedEnergy = null;
  let selectedStress = null;

  // Utility function to handle selection
  function handleSelection(buttons, selectedClass, callback) {
    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        // Remove active style from all
        buttons.forEach(b => b.classList.remove('bg-gray-200'));

        // Add active style to clicked button
        btn.classList.add('bg-gray-200');

        // Save value
        callback(btn.innerText);
      });
    });
  }

  // Mood selection
  const moodButtons = document.querySelectorAll('.mood-btn');
  handleSelection(moodButtons, 'mood', value => {
    selectedMood = value;
  });

  // Energy selection
  const energyButtons = document.querySelectorAll('.energy-btn');
  handleSelection(energyButtons, 'energy', value => {
    selectedEnergy = value;
  });

  // Stress selection
  const stressButtons = document.querySelectorAll('.stress-btn');
  handleSelection(stressButtons, 'stress', value => {
    selectedStress = value;
  });

  // Submit handler
  document.getElementById('submitBtn').addEventListener('click', () => {
  if (!selectedMood || !selectedEnergy || !selectedStress) {
    alert('Please complete all check-in fields.');
    return;
  }

  const checkInData = {
  mood: selectedMood,
  energy: selectedEnergy,
  stress: selectedStress,
  timestamp: new Date().toISOString()
};


// Add newest check-in to the beginning
checkInHistory.unshift(checkInData);

// Keep only last 7 entries
if (checkInHistory.length > 7) {
  checkInHistory.pop();
}

console.log('Check-in history:', checkInHistory);

const pattern = detectPattern(checkInHistory);
const insightText = getStaticInsight(pattern);

document.querySelector('#todayInsight').innerText = insightText;



  // Show success message
  const successMessage = document.getElementById('successMessage');
  successMessage.classList.remove('hidden');

  // Optional: hide after 3 seconds
  setTimeout(() => {
    successMessage.classList.add('hidden');
  }, 3000);
});

</script>

<script>
  function showView(view) {
  const views = ['checkin', 'moodData', 'improveMood', 'miniResets'];

  views.forEach(v => {
    document.getElementById(v + 'View').classList.add('hidden');
  });

  document.getElementById(view + 'View').classList.remove('hidden');

  // If Mood Data is opened, render data
  if (view === 'moodData') {
    renderMoodData();
  }
}


let myChart = null; // Global variable to track the chart instance

function renderMoodData() {
  const container = document.getElementById('moodDataContent');
  if (checkInHistory.length === 0) {
    container.innerText = 'No check-ins yet.';
    return;
  }

  // Helper to convert data to numbers
  const moodMap = { 'üòä': 5, 'üôÇ': 4, 'üòê': 3, 'üòî': 2, 'üòû': 1 };
  const energyMap = { 'High': 5, 'Medium': 3, 'Low': 1 };
  const stressMap = { 'Low': 5, 'Medium': 3, 'High': 1 }; // Inverted: Low stress is "better"

  // Process data for the chart (showing newest on the right)
  const chartLabels = [...checkInHistory].reverse().map(e => 
    new Date(e.timestamp).toLocaleDateString([], { weekday: 'short' })
  );

  const compositeScores = [...checkInHistory].reverse().map(e => {
    const m = moodMap[e.mood] || 3;
    const en = energyMap[e.energy] || 3;
    const s = stressMap[e.stress] || 3;
    return (m + en + s) / 3; // The average "Baseline Score"
  });

  const ctx = document.getElementById('moodChart').getContext('2d');
  if (myChart) { myChart.destroy(); }

  myChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: chartLabels,
      datasets: [{
        label: 'Overall Wellness Baseline',
        data: compositeScores,
        borderColor: '#6A1CF7', // Brand Purple
        backgroundColor: 'rgba(106, 28, 247, 0.1)',
        fill: true,
        tension: 0.4,
        pointRadius: 5,
        pointBackgroundColor: '#E11D48' // Brand Pink points
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          min: 1,
          max: 5,
          ticks: {
            callback: (val) => ['Low', 'Below Avg', 'Neutral', 'Good', 'Peak'][val - 1]
          }
        }
      },
      plugins: {
        legend: { display: false }
      }
    }
  });
}

function getStaticInsight(pattern) {
  switch (pattern) {
    case 'LOW_ENERGY_TREND':
      return 'Your energy has been lower for a few days. A short break or light movement might help reset your baseline.';
    case 'HIGH_STRESS_PATTERN':
      return 'Stress levels have been consistently high. Taking a moment to pause or breathe slowly could help.';
    case 'LOW_MOOD_STREAK':
      return 'You‚Äôve been checking in with lower mood recently. Small acts of care can make a difference.';
    default:
      return 'Thanks for checking in today.';
  }
}


// Run this on page load
window.onload = () => {
  const saved = localStorage.getItem('baselineData');
  if (saved) {
    checkInHistory = JSON.parse(saved);
  }
};

// Add this line inside your "submitBtn" click handler, after checkInHistory.unshift()
localStorage.setItem('baselineData', JSON.stringify(checkInHistory));

</script>


</body>
</html>
